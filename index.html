<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå - ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏•‡∏∂‡∏Å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        }
        .gradient-light {
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .animated-bg {
            position: relative;
            overflow: hidden;
        }
        .animated-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #1e40af, #3b82f6, #60a5fa, #93c5fd, #2563eb, #1d4ed8);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -2;
        }
        .animated-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"><animate attributeName="cy" values="20;80;20" dur="3s" repeatCount="indefinite"/></circle><circle cx="40" cy="40" r="1.5" fill="rgba(255,255,255,0.15)"><animate attributeName="cy" values="40;10;40" dur="4s" repeatCount="indefinite"/></circle><circle cx="60" cy="60" r="2.5" fill="rgba(255,255,255,0.08)"><animate attributeName="cy" values="60;90;60" dur="5s" repeatCount="indefinite"/></circle><circle cx="80" cy="30" r="1" fill="rgba(255,255,255,0.2)"><animate attributeName="cy" values="30;70;30" dur="3.5s" repeatCount="indefinite"/></circle></svg>');
            animation: float 20s linear infinite;
            z-index: -1;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-100px); }
        }
        .stats-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation Bar -->
    <nav class="gradient-bg shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-4">
                    <img src="https://www.cs.mju.ac.th/assets/logo.aa2240c2.png" alt="Maejo University Logo" class="h-12 w-12">
                    <div>
                        <h1 class="text-white text-lg font-bold leading-tight">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</h1>
                        <p class="text-white text-sm opacity-90">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÅ‡∏°‡πà‡πÇ‡∏à‡πâ</p>
                    </div>
                </div>
                
                <!-- Cart Button -->
                <div class="relative">
                    <button onclick="showCart()" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition duration-300 flex items-center space-x-2">
                        <span>üõí</span>
                        <span>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</span>
                        <div id="cartBadge" class="cart-badge" style="display: none;">0</div>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Shopping Page -->
    <div class="min-h-screen animated-bg py-8">
        <div class="max-w-6xl mx-auto px-4">
            <!-- Header -->
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-white mb-4">üéâ ‡∏â‡∏•‡∏≠‡∏á‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö 30 ‡∏õ‡∏µ ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå üéâ</h1>
                <p class="text-white text-lg mb-8">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏•‡∏∂‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©</p>
                
                <!-- Product Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mb-8">
                    <div class="stats-card rounded-xl p-4 text-white">
                        <div class="text-2xl font-bold" id="availableCount">0</div>
                        <div class="text-sm opacity-90">üì¶ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢</div>
                    </div>
                    <div class="stats-card rounded-xl p-4 text-white">
                        <div class="text-2xl font-bold text-yellow-300" id="lowStockCount">0</div>
                        <div class="text-sm opacity-90">‚ö†Ô∏è ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î (‚â§5 ‡∏ä‡∏¥‡πâ‡∏ô)</div>
                    </div>
                    <div class="stats-card rounded-xl p-4 text-white">
                        <div class="text-2xl font-bold text-red-300" id="outOfStockCount">0</div>
                        <div class="text-sm opacity-90">‚ùå ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î</div>
                    </div>
                </div>
            </div>

            <!-- Product Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12" id="productGrid">
                <!-- Products will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="bg-white rounded-xl p-8 max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                <button onclick="closeCart()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div id="cartItems" class="space-y-4 mb-6">
                <!-- Cart items will be generated by JavaScript -->
            </div>

            <div id="cartEmpty" class="text-center py-8 text-gray-500" style="display: none;">
                <div class="text-6xl mb-4">üõí</div>
                <p>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</p>
            </div>

            <div id="cartSummary" class="border-t pt-6" style="display: none;">
                <div class="space-y-3">
                    <div class="flex justify-between text-lg">
                        <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                        <span id="subtotal" class="font-semibold">‡∏ø0</span>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <label class="text-sm font-medium">‡∏£‡∏´‡∏±‡∏™‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î:</label>
                        <input type="text" id="discountCode" placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: csmju" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <button onclick="applyDiscount()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                            ‡πÉ‡∏ä‡πâ
                        </button>
                    </div>
                    
                    <div id="discountInfo" class="text-green-600 text-sm" style="display: none;">
                        ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î: <span id="discountAmount">‡∏ø0</span>
                    </div>
                    
                    <div class="flex justify-between text-xl font-bold border-t pt-3">
                        <span>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</span>
                        <span id="total" class="text-blue-600">‡∏ø0</span>
                    </div>
                    
                    <button onclick="showCheckout()" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:shadow-lg transition duration-300 mt-4">
                        üí≥ ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="bg-white rounded-xl p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">üìù ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                <button onclick="closeCheckout()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form id="checkoutForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                    <input type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà *</label>
                    <textarea required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" rows="3" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏™‡πà‡∏á"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
                    <input type="tel" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="0xx-xxx-xxxx">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô *</label>
                    <input type="file" required accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ *</label>
                    <input type="date" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="delivery" value="pickup" required class="mr-2">
                            <span>‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏ì‡∏∞</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="delivery" value="delivery" required class="mr-2">
                            <span>‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</span>
                        </label>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô *</label>
                    <select required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</option>
                        <option>‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</option>
                        <option>PromptPay</option>
                        <option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                    </select>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                    <div class="text-sm space-y-1" id="orderSummary">
                        <!-- Order summary will be generated -->
                    </div>
                    <div class="border-t pt-2 mt-2 font-bold">
                        ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: <span id="finalTotal">‡∏ø0</span>
                    </div>
                </div>

                <button type="submit" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:shadow-lg transition duration-300">
                    ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                </button>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center">
            <div class="text-6xl mb-4">‚úÖ</div>
            <h3 class="text-2xl font-bold text-green-600 mb-4">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
            <p class="text-gray-600 mb-6">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
            <button onclick="closeSuccessModal()" class="gradient-bg text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition duration-300">
                ‡∏ï‡∏Å‡∏•‡∏á
            </button>
        </div>
    </div>

    <script>
        // Product data
        const products = [
            { id: 1, name: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏•‡∏∂‡∏Å', price: 350, stock: 25, emoji: 'üëï', description: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö 30 ‡∏õ‡∏µ' },
            { id: 2, name: '‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏õ‡πâ', price: 650, stock: 15, emoji: 'üéí', description: '‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏õ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤' },
            { id: 3, name: '‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥', price: 250, stock: 30, emoji: '‚òï', description: '‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏•‡πÇ‡∏Å‡πâ' },
            { id: 4, name: '‡∏´‡∏°‡∏ß‡∏Å', price: 300, stock: 20, emoji: 'üß¢', description: '‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏õ ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Ñ‡∏ì‡∏∞' },
            { id: 5, name: '‡∏£‡πà‡∏°', price: 450, stock: 12, emoji: '‚òÇÔ∏è', description: '‡∏£‡πà‡∏°‡∏û‡∏±‡∏ö ‡∏Å‡∏±‡∏ô‡πÅ‡∏î‡∏î ‡∏Å‡∏±‡∏ô‡∏ù‡∏ô' },
            { id: 6, name: '‡πÄ‡∏Ç‡πá‡∏°‡∏Å‡∏•‡∏±‡∏î', price: 150, stock: 50, emoji: 'üìå', description: '‡πÄ‡∏Ç‡πá‡∏°‡∏Å‡∏•‡∏±‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Ñ‡∏ì‡∏∞' },
            { id: 7, name: '‡∏™‡∏°‡∏∏‡∏î‡πÇ‡∏ô‡πâ‡∏ï', price: 200, stock: 35, emoji: 'üìì', description: '‡∏™‡∏°‡∏∏‡∏î‡πÇ‡∏ô‡πâ‡∏ï‡∏õ‡∏Å‡πÅ‡∏Ç‡πá‡∏á' },
            { id: 8, name: '‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤', price: 180, stock: 40, emoji: 'üñäÔ∏è', description: '‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡πÇ‡∏•‡∏´‡∏∞ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏•‡πà‡∏≠‡∏á' }
        ];

        let cart = [];
        let discountApplied = false;
        let discountPercent = 0;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();
            updateCartBadge();
            updateProductStats();
            
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.querySelector('input[type="date"]').value = today;
        });

        // Update product statistics
        function updateProductStats() {
            const available = products.filter(p => p.stock > 5).length;
            const lowStock = products.filter(p => p.stock > 0 && p.stock <= 5).length;
            const outOfStock = products.filter(p => p.stock === 0).length;
            
            document.getElementById('availableCount').textContent = available;
            document.getElementById('lowStockCount').textContent = lowStock;
            document.getElementById('outOfStockCount').textContent = outOfStock;
        }

        // Render products
        function renderProducts() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = products.map(product => `
                <div class="product-card bg-white rounded-xl p-6 card-shadow">
                    <div class="w-full h-32 bg-blue-50 rounded-lg mb-4 flex items-center justify-center">
                        <span class="text-4xl">${product.emoji}</span>
                    </div>
                    <h3 class="font-semibold text-lg mb-2">${product.name}</h3>
                    <p class="text-gray-600 mb-3">${product.description}</p>
                    <p class="text-blue-600 font-bold text-xl mb-2">‡∏ø${product.price}</p>
                    <p class="text-sm text-gray-500 mb-4">‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${product.stock} ‡∏ä‡∏¥‡πâ‡∏ô</p>
                    <button onclick="addToCart(${product.id})" 
                            class="w-full gradient-bg text-white py-2 rounded-lg font-semibold hover:shadow-lg transition duration-300 ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                            ${product.stock === 0 ? 'disabled' : ''}>
                        ${product.stock === 0 ? '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î' : 'üõí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤'}
                    </button>
                </div>
            `).join('');
        }

        // Add to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            if (product.stock === 0) {
                showOutOfStockModal();
                return;
            }

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity++;
                } else {
                    alert('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠');
                    return;
                }
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            updateCartBadge();
            showAddedToCartAnimation();
        }

        // Show out of stock modal
        function showOutOfStockModal() {
            const modal = document.createElement('div');
            modal.className = 'modal show';
            modal.innerHTML = `
                <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center">
                    <div class="text-6xl mb-4">üòî</div>
                    <h3 class="text-2xl font-bold text-red-600 mb-4">‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢</h3>
                    <p class="text-gray-600 mb-6">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß<br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á</p>
                    <button onclick="this.closest('.modal').remove()" class="bg-red-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition duration-300">
                        ‡∏ï‡∏Å‡∏•‡∏á
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (modal.parentNode) {
                    modal.remove();
                }
            }, 3000);
        }

        // Update cart badge
        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (totalItems > 0) {
                badge.textContent = totalItems;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // Show cart
        function showCart() {
            renderCart();
            document.getElementById('cartModal').classList.add('show');
        }

        // Close cart
        function closeCart() {
            document.getElementById('cartModal').classList.remove('show');
        }

        // Render cart
        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const cartEmpty = document.getElementById('cartEmpty');
            const cartSummary = document.getElementById('cartSummary');

            if (cart.length === 0) {
                cartItems.innerHTML = '';
                cartEmpty.style.display = 'block';
                cartSummary.style.display = 'none';
                return;
            }

            cartEmpty.style.display = 'none';
            cartSummary.style.display = 'block';

            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center justify-between bg-gray-50 p-4 rounded-lg">
                    <div class="flex items-center space-x-4">
                        <span class="text-2xl">${item.emoji}</span>
                        <div>
                            <h4 class="font-semibold">${item.name}</h4>
                            <p class="text-gray-600">‡∏ø${item.price}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button onclick="updateQuantity(${item.id}, -1)" class="quantity-btn bg-gray-200 hover:bg-gray-300">-</button>
                        <span class="font-semibold w-8 text-center">${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)" class="quantity-btn bg-blue-500 text-white hover:bg-blue-600">+</button>
                        <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700 ml-4">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');

            updateCartSummary();
        }

        // Update quantity
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (!item) return;

            const newQuantity = item.quantity + change;
            
            if (newQuantity <= 0) {
                removeFromCart(productId);
                return;
            }
            
            if (newQuantity > product.stock) {
                alert('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠');
                return;
            }

            item.quantity = newQuantity;
            updateCartBadge();
            renderCart();
        }

        // Remove from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartBadge();
            renderCart();
        }

        // Update cart summary
        function updateCartSummary() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discountAmount = discountApplied ? Math.floor(subtotal * discountPercent / 100) : 0;
            const total = subtotal - discountAmount;

            document.getElementById('subtotal').textContent = `‡∏ø${subtotal}`;
            document.getElementById('total').textContent = `‡∏ø${total}`;
            
            if (discountApplied) {
                document.getElementById('discountInfo').style.display = 'block';
                document.getElementById('discountAmount').textContent = `‡∏ø${discountAmount}`;
            } else {
                document.getElementById('discountInfo').style.display = 'none';
            }
        }

        // Apply discount
        function applyDiscount() {
            const code = document.getElementById('discountCode').value.toLowerCase();
            
            if (code === 'csmju') {
                discountApplied = true;
                discountPercent = 10;
                updateCartSummary();
                alert('‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏•‡∏î 10%');
            } else if (code === '') {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î');
            } else {
                alert('‡∏£‡∏´‡∏±‡∏™‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            }
        }

        // Show checkout
        function showCheckout() {
            if (cart.length === 0) return;
            
            renderOrderSummary();
            closeCart();
            document.getElementById('checkoutModal').classList.add('show');
        }

        // Close checkout
        function closeCheckout() {
            document.getElementById('checkoutModal').classList.remove('show');
        }

        // Render order summary
        function renderOrderSummary() {
            const orderSummary = document.getElementById('orderSummary');
            const finalTotal = document.getElementById('finalTotal');
            
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discountAmount = discountApplied ? Math.floor(subtotal * discountPercent / 100) : 0;
            const total = subtotal - discountAmount;

            orderSummary.innerHTML = cart.map(item => 
                `<div class="flex justify-between">
                    <span>${item.name} x${item.quantity}</span>
                    <span>‡∏ø${item.price * item.quantity}</span>
                </div>`
            ).join('') + 
            (discountApplied ? `<div class="flex justify-between text-green-600">
                <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (${discountPercent}%)</span>
                <span>-‡∏ø${discountAmount}</span>
            </div>` : '');

            finalTotal.textContent = `‡∏ø${total}`;
        }

        // Show added to cart animation
        function showAddedToCartAnimation() {
            // Simple feedback - could be enhanced with actual animation
            const badge = document.getElementById('cartBadge');
            badge.style.transform = 'scale(1.3)';
            setTimeout(() => {
                badge.style.transform = 'scale(1)';
            }, 200);
        }

        // Form submission
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Update stock
            cart.forEach(item => {
                const product = products.find(p => p.id === item.id);
                product.stock -= item.quantity;
            });
            
            // Clear cart
            cart = [];
            discountApplied = false;
            discountPercent = 0;
            
            // Update UI
            updateCartBadge();
            renderProducts();
            updateProductStats();
            closeCheckout();
            document.getElementById('successModal').classList.add('show');
        });

        // Close success modal
        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('show');
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'967f6f8492792dc0',t:'MTc1Mzk4OTQ0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
